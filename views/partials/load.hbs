<div id="accordion">
  <h3>Open local folder</h3>
  <div>
    <form id="">
      <label>Select folder<input type="file" id="open-local-folder" nwdirectory></label>
    </form>
  </div>
  
  <h3>Open local .elcx file</h3>
  <div>
    <form id="">
      <label>Select file<input type="file" id="open-local-archive" accept=".elcx"></label>
    </form>
  </div>
  
  <h3>Open url</h3>
  <div>
    <form id="open-remote-form">
      <label for="open-remote-url">Url</label><input type="text" id="open-remote-url" required>
      <label>Save to<input type="file" id="open-remote-dest" nwdirectory required></label>
      <input type="submit" value="Download">
    </form>
  </div>
</div>

<script>
$("#accordion").accordion();

var $localFolder = $('#open-local-folder');
var $localArchive = $('#open-local-archive');
var $openRemoteForm = $('#open-remote-form');
var $openRemoteUrl = $('#open-remote-url');
var $openRemoteDest = $('#open-remote-dest');


$localFolder.on('change', function() {
  var path = this.files[0].path;
  if (path !== '') {
    sendMessage('local-folder', { path: path });
    // reset its value so it can catch the next event in case we select the same previous value
    this.value = '';
  }
});

$localArchive.on('change', function() {
  var path = this.files[0].path;
  // var name = this.files[0].name;
  console.log(path, name);
  if (path !== '') {
    sendMessage('local-archive', { path: path });
    // reset its value so it can catch the next event in case we select the same previous value
    this.value = '';
  }
});

$openRemoteForm.on('submit', function(e) {
  e.preventDefault();
  var url = $openRemoteUrl.val();
  var path = $openRemoteDest.get(0).files[0].path;

  if (url !== '' && path !== '') {
    sendMessage('url', { url: url, path: path });
    // $openRemoteDest.val('');
  }

});
</script>